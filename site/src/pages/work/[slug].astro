---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { profile } from "../../data/profile";
import { projects } from "../../data/projects";

export function getStaticPaths() {
  return projects.map((project) => ({
    params: { slug: project.slug },
    props: { project },
  }));
}

const { project } = Astro.props;
---

<BaseLayout
  title={`${project.title} | ${profile.name}`}
  description={project.overview}
  path={`/work/${project.slug}`}
>

<section class="py-20 px-4">
  <div class="mx-auto max-w-6xl">
    <div class="reveal mb-6" data-delay="0.04">
      <a href="/work" class="text-xs font-mono text-slate-600 hover:text-accent-soft transition-colors">
        ← Back to Work
      </a>
    </div>

    <div class="reveal mb-3" data-delay="0.08">
      <p class="text-xs font-mono uppercase tracking-[0.3em] text-accent-soft/70">{project.category}</p>
    </div>
    <div class="reveal mb-2" data-delay="0.12">
      <h1 class="font-display font-bold text-white text-balance"
        style="font-size: clamp(1.9rem, 4vw, 3rem); letter-spacing: -0.03em;">
        {project.title}
      </h1>
    </div>
    <div class="reveal" data-delay="0.17">
      <p class="text-sm font-mono text-slate-600">{project.client} · {project.period}</p>
    </div>
  </div>
</section>

<section class="pb-20 px-4">
  <div class="mx-auto max-w-6xl">
    <div class="grid gap-5 lg:grid-cols-3">

      <!-- Main content -->
      <div class="lg:col-span-2 space-y-5">
        <div class="reveal glass-panel rounded-2xl p-8" data-delay="0.08">
          <h2 class="text-xs font-mono uppercase tracking-widest text-accent-soft/60 mb-4">Overview</h2>
          <p class="text-base text-slate-300 leading-relaxed">{project.overview}</p>
        </div>
        <div class="reveal glass-panel rounded-2xl p-8" data-delay="0.13">
          <h2 class="text-xs font-mono uppercase tracking-widest text-accent-soft/60 mb-4">Problem</h2>
          <p class="text-sm text-slate-400 leading-relaxed">{project.problem}</p>
        </div>
        <div class="reveal glass-panel rounded-2xl p-8" data-delay="0.18">
          <h2 class="text-xs font-mono uppercase tracking-widest text-accent-soft/60 mb-4">Approach</h2>
          <p class="text-sm text-slate-400 leading-relaxed">{project.approach}</p>
        </div>
      </div>

      <!-- Sidebar -->
      <div class="space-y-5">
        <div class="reveal glass-panel rounded-2xl p-7" data-delay="0.10">
          <h2 class="text-xs font-mono uppercase tracking-widest text-accent-soft/60 mb-4">Results</h2>
          <ul class="space-y-3">
            {project.results.map((r) => (
              <li class="flex items-start gap-3 text-sm text-slate-300">
                <span class="text-accent-soft/50 font-mono mt-0.5 shrink-0">✓</span> {r}
              </li>
            ))}
          </ul>
        </div>
        <div class="reveal glass-panel rounded-2xl p-7" data-delay="0.15">
          <h2 class="text-xs font-mono uppercase tracking-widest text-accent-soft/60 mb-4">Deliverables</h2>
          <ul class="space-y-3">
            {project.deliverables.map((d) => (
              <li class="flex items-start gap-3 text-sm text-slate-400">
                <span class="text-slate-700 font-mono mt-0.5 shrink-0">—</span> {d}
              </li>
            ))}
          </ul>
        </div>
        <div class="reveal glass-panel rounded-2xl p-7" data-delay="0.20">
          <h2 class="text-xs font-mono uppercase tracking-widest text-accent-soft/60 mb-4">Tools</h2>
          <div class="flex flex-wrap gap-2">
            {project.tools.map((tool) => (
              <span class="text-xs px-2.5 py-1.5 rounded-full text-slate-500 font-mono"
                style="border: 1px solid rgba(255,255,255,0.08); background: rgba(255,255,255,0.03);">
                {tool}
              </span>
            ))}
          </div>
        </div>
      </div>
    </div>

    <!-- Bottom CTA -->
    <div class="reveal mt-10 pt-10 border-t flex flex-wrap gap-4" style="border-color: rgba(255,255,255,0.07);" data-delay="0.1">
      <a href={profile.links.whatsapp} target="_blank" rel="noreferrer"
        class="inline-flex items-center gap-2 rounded-full px-6 py-3 text-sm font-semibold text-white"
        style="background: linear-gradient(135deg, #2563eb, #1d4ed8); box-shadow: 0 4px 24px rgba(37,99,235,0.4);">
        ↗ Discuss a similar project
      </a>
      <a href="/work"
        class="inline-flex items-center gap-2 rounded-full px-6 py-3 text-sm font-medium text-slate-400 glass-panel ring-hover hover:text-white transition-colors">
        ← All work
      </a>
    </div>
  </div>
</section>

</BaseLayout>